<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Git Hooks — Complete Guide</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: #f8fafc;
        margin: 0;
        padding: 20px;
        color: #1e293b;
      }
      header {
        display: flex;
        gap: 16px;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      select {
        padding: 8px;
        font-size: 16px;
      }
      h1 {
        color: #2563eb;
        margin: 0;
      }
      h2 {
        margin-top: 30px;
        color: #1e40af;
      }
      .grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 18px;
      }
      .hook {
        background: white;
        border-radius: 8px;
        padding: 12px;
        box-shadow: 0 2px 8px rgba(2, 6, 23, 0.06);
      }
      .hook h3 {
        margin: 0 0 6px 0;
        color: #0f172a;
      }
      .hook p {
        margin: 0 0 8px 0;
        line-height: 1.45;
      }
      pre {
        background: #0f172a;
        color: #e2e8f0;
        padding: 10px;
        border-radius: 8px;
        overflow-x: auto;
        font-size: 13px;
      }
      small {
        color: #475569;
        display: block;
        margin-top: 6px;
      }
      .note {
        margin-top: 14px;
        color: #334155;
        font-size: 14px;
      }
      footer {
        margin-top: 20px;
        color: #64748b;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1 id="title">Git Hooks — Complete Guide</h1>
      <div>
        <label for="langSelect" style="margin-right: 8px">Language</label>
        <select id="langSelect">
          <option value="en">English</option>
          <option value="hi">Hindi</option>
        </select>
      </div>
    </header>

    <section id="intro" class="note"></section>

    <h2 id="clientTitle">Client-side Hooks</h2>
    <div id="clientHooks" class="grid"></div>

    <h2 id="serverTitle">Server-side Hooks</h2>
    <div id="serverHooks" class="grid"></div>

    <footer>
      Tip: To enable hooks in a repo, put executable scripts in
      <code>.git/hooks/</code> (or use tools like <code>husky</code> for easier
      management).
    </footer>

    <script>
      // Complete list of common Git hooks with explanations and examples.
      const hooksList = {
        client: [
          {
            name: "applypatch-msg",
            desc_en:
              "Run when a patch generated by git-am is applied. Can be used to validate the message in the patch.",
            desc_hi:
              "git-am द्वारा बनाए गए पैच लागू करते समय चलता है — पैच के कमिट मैसेज की जाँच के लिए उपयोगी।",
            example: `#!/bin/sh
# file: .git/hooks/applypatch-msg
msg=$(cat "$1")
if [ -z "$msg" ]; then
  echo "Empty message not allowed"
  exit 1
fi`,
          },
          {
            name: "pre-applypatch",
            desc_en: "Runs before applypatch; can prepare changes or abort.",
            desc_hi:
              "applypatch से पहले चलता है — बदलाव तैयार करने या रोकने के लिए उपयोगी।",
            example: `#!/bin/sh
echo "Pre-applypatch checks..."`,
          },
          {
            name: "post-applypatch",
            desc_en:
              "Runs after applypatch; useful for cleanup or notifications.",
            desc_hi:
              "applypatch के बाद चलता है — क्लीनअप या नोटिफिकेशन के लिए।",
            example: `#!/bin/sh
echo "Patch applied."`,
          },
          {
            name: "pre-commit",
            desc_en:
              "Runs before creating the commit. Common to run linters, formatters, or tests and abort commit on failure.",
            desc_hi:
              "कमिट बनाने से पहले चलता है — lint, format या tests चलाने के लिए उपयोगी।",
            example: `#!/bin/sh
npm run lint || exit 1
npm test || exit 1`,
          },
          {
            name: "prepare-commit-msg",
            desc_en:
              "Runs before the commit-msg editor opens. Good to auto-fill or modify the commit message.",
            desc_hi:
              "commit-msg एडिटर खुलने से पहले चलता है — कमिट मैसेज ऑटो-भरे या बदलने के लिए।",
            example: `#!/bin/sh
# Add branch name to commit message
BRANCH=$(git rev-parse --abbrev-ref HEAD)
printf "[%s] %s" "$BRANCH" "$(cat $1)" > $1`,
          },
          {
            name: "commit-msg",
            desc_en:
              "Validates the commit message. Exit non-zero to stop commit.",
            desc_hi: "कमिट मैसेज की जाँच करता है — गलत होने पर कमिट रोकता है।",
            example: `#!/bin/sh
msg=$(cat "$1")
if ! echo "$msg" | grep -qE "^(FEAT|FIX|DOC|CHORE): "; then
  echo "Commit msg must start with FEAT:, FIX:, DOC:, or CHORE:"
  exit 1
fi`,
          },
          {
            name: "post-commit",
            desc_en:
              "Runs after a commit is made. Useful for notifications or local bookkeeping.",
            desc_hi: "कमिट के बाद चलता है — नोटिफिकेशन या लोकल रिकॉर्ड के लिए।",
            example: `#!/bin/sh
echo "Committed: $(git rev-parse --short HEAD)"`,
          },
          {
            name: "pre-rebase",
            desc_en:
              "Runs before a rebase starts. You can prevent rebase under conditions.",
            desc_hi:
              "rebase शुरू होने से पहले चलता है — कुछ स्थितियों में rebase रोकने के लिए।",
            example: `#!/bin/sh
if [ "$(git rev-parse --abbrev-ref HEAD)" = "main" ]; then
  echo "Don't rebase main branch"
  exit 1
fi`,
          },
          {
            name: "post-checkout",
            desc_en:
              "Runs after checkout. Arguments: previous HEAD, new HEAD, branch-switch flag.",
            desc_hi:
              "checkout के बाद चलता है — पिछले और नए HEAD के साथ उपयोगी।",
            example: `#!/bin/sh
echo "Checked out to $(git rev-parse --abbrev-ref HEAD)"`,
          },
          {
            name: "post-merge",
            desc_en:
              "Runs after a merge. Commonly used to run npm install or rebuild assets.",
            desc_hi:
              "merge के बाद चलता है — अक्सर npm install या बिल्ड के लिए।",
            example: `#!/bin/sh
echo "Post-merge: installing deps..."
npm install || true`,
          },
          {
            name: "pre-push",
            desc_en:
              "Runs before code is pushed. Useful to run tests or prevent push.",
            desc_hi:
              "कोड पुश करने से पहले चलता है — tests चलाने या पुश रोकने के लिए।",
            example: `#!/bin/sh
echo "Running tests before push..."
npm test || { echo "Tests failed"; exit 1; }`,
          },
          {
            name: "pre-receive (client-side note)",
            desc_en:
              "This is a server-side hook; on the client you won't install it. It's listed for completeness.",
            desc_hi:
              "यह सर्वर-साइड हुक है; क्लाइंट पर इसे इंस्टॉल नहीं करते। पूर्णता के लिए जोड़ा गया।",
            example: `# server-side hook example (see server section)`,
          },
          {
            name: "prepare-commit-msg (again)",
            desc_en:
              "Note: already explained above — included here to indicate it's a frequently-used hook.",
            desc_hi: "नोट: पहले ही बताया गया — अक्सर उपयोग होने वाला हुक।",
            example: `# see above`,
          },
          {
            name: "pre-auto-gc",
            desc_en: "Runs before 'git gc --auto' to allow preventing auto-gc.",
            desc_hi: "git gc --auto से पहले चलता है — auto-gc रोकने के लिए।",
            example: `#!/bin/sh
echo "Auto-gc triggered"`,
          },
          {
            name: "post-rewrite",
            desc_en:
              "Runs after commands that rewrite commits (e.g., git commit --amend, git rebase).",
            desc_hi:
              "कमिट री-राइट करने वाले कमांड्स के बाद चलता है (जैसे amend, rebase)।",
            example: `#!/bin/sh
echo "Commits were rewritten."`,
          },
          {
            name: "sendemail-validate",
            desc_en:
              "Validates emails before git-send-email (rare in modern flows).",
            desc_hi: "git-send-email से पहले ईमेल की वैधता चेक करने के लिए।",
            example: `#!/bin/sh
echo "Validating email..."`,
          },
          {
            name: "fsmonitor-watchman (optional)",
            desc_en:
              "Used by git to integrate with file-system monitors (speedups). Not usually edited by hand.",
            desc_hi:
              "फाइल-सिस्टम मॉनिटर के साथ इंटीग्रेशन के लिए उपयोग होता है — सामान्यतः हाथ से नहीं बदलते।",
            example: `# managed by git/watchman integration`,
          },
        ],

        server: [
          {
            name: "pre-receive",
            desc_en:
              "Server-side: runs once for the entire push. You can reject the push by exiting non-zero.",
            desc_hi:
              "सर्वर-साइड: पुश के लिए एक बार चलता है — गलत पुश रोकने के लिए उपयोगी।",
            example: `#!/bin/sh
while read oldrev newrev refname; do
  # Example: prevent force-push to main
  if [ "$refname" = "refs/heads/main" ]; then
    # check if it's a non-fast-forward (force push)
    if ! git merge-base --is-ancestor "$oldrev" "$newrev"; then
      echo "Force push to main is not allowed"
      exit 1
    fi
  fi
done`,
          },
          {
            name: "update",
            desc_en:
              "Server-side: runs once per branch ref that's pushed. Can validate or reject a particular ref.",
            desc_hi:
              "सर्वर-साइड: हर पुश किए गए ब्रांच पर एक बार चलता है — किसी विशेष ref को जाँच/रोकने के लिए।",
            example: `#!/bin/sh
refname="$1"
oldrev="$2"
newrev="$3"
echo "Update hook for $refname from $oldrev to $newrev"
# add validations here`,
          },
          {
            name: "post-receive",
            desc_en:
              "Server-side: runs after the push is accepted. Good for CI/CD triggers and notifications.",
            desc_hi:
              "सर्वर-साइड: पुश स्वीकार होने के बाद चलता है — CI/CD और नोटिफिकेशन के लिए उपयुक्त।",
            example: `#!/bin/sh
while read oldrev newrev refname; do
  echo "Deploying $refname..."
  # e.g., trigger a deploy script or webhook
done`,
          },
          {
            name: "post-update",
            desc_en:
              "Server-side: invoked after refs are updated. Often used to update server-side services (e.g., hooks that update HTTP server).",
            desc_hi:
              "सर्वर-साइड: refs अपडेट होने के बाद चलता है — सर्वर-साइड सर्विस अपडेट करने के लिए।",
            example: `#!/bin/sh
for ref in "$@"; do
  echo "Updated $ref"
done`,
          },
          {
            name: "push-to-checkout",
            desc_en:
              "Server-side: used by some setups where a bare repo updates a working tree when a push arrives.",
            desc_hi:
              "कुछ सेटअप में प्रयोग होता है जहां bare repo पुश पर working tree अपडेट करता है।",
            example: `#!/bin/sh
echo "Push to checkout triggered"`,
          },
          {
            name: "pre-receive (note)",
            desc_en:
              "On GitHub.com you can't install server-side hooks — use GitHub Actions or webhooks instead.",
            desc_hi:
              "GitHub.com पर आप सर्वर-साइड हुक इंस्टॉल नहीं कर सकते — GitHub Actions या वेबहुक्स का उपयोग करें।",
            example: `# Use GitHub Actions / webhooks on GitHub.com`,
          },
        ],
      };

      const data = {
        en: {
          title: "Git Hooks — Complete Guide",
          intro: `<p>Git includes many hooks (scripts) you can run automatically at key points: before committing, after merging, on the server when receiving pushes, and more. Below is a comprehensive listing of commonly-available hooks with short examples.</p>
                  <p class="note">Note: client-side hooks live in <code>.git/hooks/</code> and are not shared via remote by default. Use a tool like <code>husky</code> to version-control hook behavior.</p>`,
          clientTitle: "Client-side Hooks",
          serverTitle: "Server-side Hooks",
        },
        hi: {
          title: "Git Hooks — पूर्ण गाइड",
          intro: `<p>Git में कई हुक (scripts) होते हैं जो महत्वपूर्ण चरणों पर अपने आप चलते हैं: कमिट से पहले, मर्ज के बाद, सर्वर पर पुश के दौरान, और भी बहुत कुछ। नीचे सामान्य हुक्स की सूची और छोटे उदाहरण दिए गए हैं।</p>
                  <p class="note">नोट: क्लाइंट-साइड हुक्स <code>.git/hooks/</code> में रहते हैं और डिफ़ॉल्ट रूप से रिमोट पर शेयर नहीं होते। हुक व्यवहार को वर्ज़न-कंट्रोल करने के लिए <code>husky</code> जैसा टूल उपयोग करें।</p>`,
          clientTitle: "क्लाइंट-साइड हुक्स",
          serverTitle: "सर्वर-साइड हुक्स",
        },
      };

      const titleEl = document.getElementById("title");
      const langSelect = document.getElementById("langSelect");
      const introEl = document.getElementById("intro");
      const clientHooksEl = document.getElementById("clientHooks");
      const serverHooksEl = document.getElementById("serverHooks");
      const clientTitle = document.getElementById("clientTitle");
      const serverTitle = document.getElementById("serverTitle");

      function renderHooks(lang = "en") {
        const d = data[lang];
        titleEl.textContent = d.title;
        introEl.innerHTML = d.intro;
        clientTitle.textContent = d.clientTitle;
        serverTitle.textContent = d.serverTitle;

        // render client hooks
        clientHooksEl.innerHTML = "";
        hooksList.client.forEach((h) => {
          const div = document.createElement("div");
          div.className = "hook";
          const desc = lang === "en" ? h.desc_en : h.desc_hi;
          const pre = document.createElement("pre");
          pre.textContent = h.example;
          div.innerHTML = `<h3>${h.name}</h3><p>${desc}</p>`;
          div.appendChild(pre);
          clientHooksEl.appendChild(div);
        });

        // render server hooks
        serverHooksEl.innerHTML = "";
        hooksList.server.forEach((h) => {
          const div = document.createElement("div");
          div.className = "hook";
          const desc = lang === "en" ? h.desc_en : h.desc_hi;
          const pre = document.createElement("pre");
          pre.textContent = h.example;
          div.innerHTML = `<h3>${h.name}</h3><p>${desc}</p>`;
          div.appendChild(pre);
          serverHooksEl.appendChild(div);
        });
      }

      langSelect.addEventListener("change", (e) => renderHooks(e.target.value));
      renderHooks("en");
    </script>
  </body>
</html>
